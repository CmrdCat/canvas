(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{ixYC:function(e,t,n){},yPQY:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),o=n("L12J"),i=(n("ixYC"),n("o0o1")),c=n.n(i),u=(n("ls82"),n("HaE+")),l=n("IqKQ"),d=n("Jgta"),s=n("a4FB"),g=n("i8i4"),f=n.n(g),p=(n("5x/H"),n("6nsN"),n("WI49"),function(e){var t,n,o=e.bgImage,i=Object(a.useState)(0),s=i[0],g=i[1],p=Object(a.useState)(0),m=p[0],h=p[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d.a.storage(),n=t.ref(),n.child(""+o).getDownloadURL().then((function(e){g(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.database().ref("saved-tables").once("value").then((function(e){return e.val()}));case 2:t=e.sent,h(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]),0!==s&&0!==m&&(!function(){function e(){var e,t=a.stage.children.filter((function(e){return"container"===e.type})),n=[];t.map((function(e){e.children.map((function(t){if("table"===t.type){console.log(t);var a={};a.index=t.index,a.x=e.x,a.y=e.y,a.scaleX=t.scale.x,a.scaleY=t.scale.y,a.rotation=t.transform.rotation,a.texture=t._texture.textureCacheIds[0],a.uniqueId=t.uniqueId,a.id=t.id,n.push(a)}}))})),localStorage.setItem("tables",JSON.stringify(n)),localStorage.setItem("bgImage",s),e=n,d.a.database().ref("saved-tables").set(e)}localStorage.getItem("currentMode")&&localStorage.removeItem("currentMode"),document.getElementById("0").checked="true";var a=new l.a({width:1e3,height:620,backgroundColor:6011503}),r=document.getElementById("canvasWrapper"),o=l.f.from(s),i=new l.d(o);a.stage.addChild(i),i.width=a.screen.width,i.height=a.screen.height,r.innerHTML="",r.appendChild(a.view);var c=new l.c;a.view.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1),a.rightMouse=!1,a.view.onmousedown=function(e){3===e.which&&(a.rightMouse=!0)},a.view.onmouseup=function(e){3===e.which&&(a.rightMouse=!1)},null!==m&&m.map((function(e){var r=new l.b;r.type="container",r.interactive=!0,r.buttonMode=!0,r.x=e.x,r.y=e.y;var o=l.f.from(e.texture),i=new l.d(o);i.type="table",i.anchor.set(.5),i.scale.x=e.scaleX,i.scale.y=e.scaleY,i.rotation=e.rotation,i.index=e.index,i.info=e.info,i.id=e.id,i.uniqueId=e.uniqueId,i.buttonMode=!0,i.interactive=!0,i.on("scroll",(function(e){a.rightMouse&&(e.deltaY>0?(i.rotation+=.261799,i.rotation>6.28&&(i.rotation=0)):(i.rotation-=.261799,i.rotation<-6.28&&(i.rotation=0)))})),r.addChild(i),r.on("pointerover",(function(){t!=r&&(i.tint=8553074)})).on("pointerout",(function(){t!=r&&(i.tint=16777215)})).on("pointerdown",(function(e){r.data=e.data,r.alpha=.5,r.dragging=!0})).on("pointerup",(function(){r.alpha=1,r.dragging=!1,r.data=null})).on("pointerupoutside",(function(){r.alpha=1,r.dragging=!1,r.data=null})).on("pointermove",(function(){if(r.dragging){var e=r.data.getLocalPosition(r.parent);r.x=e.x,r.y=e.y}})).on("pointertap",(function(e){n&&(n.tint=16777215),t=e.target.parent,(n=e.target).tint=16711680}));var c=new l.e(i.index,{font:"2rem",fill:0,align:"center",cacheAsBitmap:!0});c.type="text",c.anchor.set(.5),r.addChild(c),a.stage.addChild(r)})),a.view.onmousewheel=function(e){c.set(e.layerX,e.layerY);var t=a.renderer.plugins.interaction.hitTest(c,a.stage);t&&t.emit("scroll",e)};var u=new l.e("Save",{font:"4rem",fill:0,align:"center",cacheAsBitmap:!0});u.interactive=!0,u.buttonMode=!0,u.type="button",u.anchor.set(.5),u.x=40,u.y=20,u.on("pointertap",(function(){e()})),a.stage.addChild(u);var g=new l.e("Remove",{font:"4rem",fill:0,align:"center",cacheAsBitmap:!0});g.interactive=!0,g.buttonMode=!0,g.type="button",g.anchor.set(.5),g.x=40,g.y=50,g.on("pointertap",(function(){t&&(a.stage.removeChild(t),t=void 0)})),a.stage.addChild(g),a.view.onclick=function(e){var o=JSON.parse(localStorage.getItem("currentMode"));if(c.set(e.layerX,e.layerY),!a.renderer.plugins.interaction.hitTest(c,a.stage)&&(o&&"cursor"===o.mode&&(n&&(n.tint=16777215),t=null,n=null),o&&"create"===o.mode)){var i=new l.b;i.type="container",i.interactive=!0,i.buttonMode=!0,i.x=e.layerX,i.y=e.layerY;var u=l.f.from(o.image),d=new l.d(u);d.type="table",d.id=o.id,d.uniqueId=Date.now(),d.anchor.set(.5),d.scale.set(.7),d.buttonMode=!0,d.interactive=!0,d.on("scroll",(function(e){a.rightMouse&&(e.deltaY>0?(d.rotation+=.261799,d.rotation>6.28&&(d.rotation=0)):(d.rotation-=.261799,d.rotation<-6.28&&(d.rotation=0)))})),d.index=a.stage.children.length-2,i.addChild(d),i.on("pointerover",(function(){t!=i&&(d.tint=8553074)})).on("pointerout",(function(){t!=i&&(d.tint=16777215)})).on("pointerdown",(function(e){i.data=e.data,i.alpha=.5,i.dragging=!0})).on("pointerup",(function(){i.alpha=1,i.dragging=!1,i.data=null})).on("pointerupoutside",(function(){i.alpha=1,i.dragging=!1,i.data=null})).on("pointermove",(function(){if(i.dragging){var e=i.data.getLocalPosition(i.parent);i.x=e.x,i.y=e.y}})).on("pointertap",(function(e){n&&(n.tint=16777215),t=e.target.parent,(n=e.target).tint=16711680}));var s=new l.e(d.index,{font:"2rem",fill:0,align:"center",cacheAsBitmap:!0});s.type="text",s.anchor.set(.5),i.addChild(s),a.stage.addChild(i),localStorage.getItem("state")||f.a.render(r,document.getElementById("canvasWrapper"))}}}(),localStorage.setItem("state","loaded")),r.a.createElement(r.a.Fragment,null)}),m=(n("Zs65"),function(){var e=Object(a.useState)(0),t=e[0],n=e[1];Object(a.useRef)(null);return Object(a.useEffect)((function(){(function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.database().ref("CanvasPreset").once("value").then((function(e){return e.val()}));case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,t?r.a.createElement(s.a,{key:0,id:0,image:t.cursorImage,mode:"cursor"}):"help",t?t.tables.map((function(e,t){return r.a.createElement(s.a,{key:t+1,id:e.id,image:e.image,mode:"create"})})):"Loading Data"),r.a.createElement("div",{id:"canvasWrapper"},document.getElementById("canvasWrapper")?r.a.createElement(p,{bgImage:t.bgImage,tableImages:t.tables,cursorImage:t.cursorImage}):"false"))});t.default=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,null,r.a.createElement(m,null)))}}}]);
//# sourceMappingURL=component---src-pages-admin-panel-jsx-daab7fe0c4a4d03a7367.js.map