(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{ixYC:function(e,t,n){},yPQY:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),o=n("L12J"),i=(n("ixYC"),n("o0o1")),c=n.n(i),u=(n("ls82"),n("HaE+")),l=n("Jgta"),d=(n("5x/H"),n("6nsN"),n("WI49"),function(e){var t=e.image,n=e.id,o=e.mode,i=Object(a.useState)(0),d=i[0],s=i[1];Object(a.useEffect)((function(){(function(){var e=Object(u.a)(c.a.mark((function e(){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.a.storage(),a=n.ref(),a.child(""+t).getDownloadURL().then((function(e){s(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var g={backgroundImage:"url('"+d+"')"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"radio",id:n,name:"chooseMode",value:t,mode:o,className:"button-input",onChange:function(){return localStorage.setItem("currentMode",JSON.stringify({image:d,mode:o,id:n}))}}),r.a.createElement("label",{htmlFor:n},r.a.createElement("div",{className:"chooseModeButton",style:g})))}),s=n("i8i4"),g=n.n(s),p=n("+oFf"),f=n.n(p),m=function(e){var t,o,i=e.bgImage,d=Object(a.useState)(0),s=d[0],p=d[1],m=Object(a.useState)(0),h=m[0],v=m[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.a.storage(),n=t.ref(),n.child(""+i).getDownloadURL().then((function(e){p(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.database().ref("saved-tables").once("value").then((function(e){return e.val()}));case 2:t=e.sent,v(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]),0!==s&&0!==h&&(!function(){var e;function a(){var e,t=r.stage.children.filter((function(e){return"container"===e.type})),n=[];t.map((function(e){e.children.map((function(t){if("table"===t.type){console.log(t);var a={};a.index=t.index,a.x=e.x,a.y=e.y,a.scaleX=t.scale.x,a.scaleY=t.scale.y,a.rotation=t.transform.rotation,a.texture=t._texture.textureCacheIds[0],a.uniqueId=t.uniqueId,a.id=t.id,n.push(a)}}))})),localStorage.setItem("tables",JSON.stringify(n)),localStorage.setItem("bgImage",s),e=n,l.a.database().ref("saved-tables").set(e)}f.a||(e=n("IqKQ")),console.log(e),localStorage.getItem("currentMode")&&localStorage.removeItem("currentMode"),document.getElementById("0").checked="true";var r=new e.Application({width:1e3,height:620,backgroundColor:6011503}),i=document.getElementById("canvasWrapper"),c=e.Texture.from(s),u=new e.Sprite(c);r.stage.addChild(u),u.width=r.screen.width,u.height=r.screen.height,i.innerHTML="",i.appendChild(r.view);var d=new e.Point;r.view.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1),r.rightMouse=!1,r.view.onmousedown=function(e){3===e.which&&(r.rightMouse=!0)},r.view.onmouseup=function(e){3===e.which&&(r.rightMouse=!1)},null!==h&&h.map((function(n){var a=new e.Container;a.type="container",a.interactive=!0,a.buttonMode=!0,a.x=n.x,a.y=n.y;var i=e.Texture.from(n.texture),c=new e.Sprite(i);c.type="table",c.anchor.set(.5),c.scale.x=n.scaleX,c.scale.y=n.scaleY,c.rotation=n.rotation,c.index=n.index,c.info=n.info,c.id=n.id,c.uniqueId=n.uniqueId,c.buttonMode=!0,c.interactive=!0,c.on("scroll",(function(e){r.rightMouse&&(e.deltaY>0?(c.rotation+=.261799,c.rotation>6.28&&(c.rotation=0)):(c.rotation-=.261799,c.rotation<-6.28&&(c.rotation=0)))})),a.addChild(c),a.on("pointerover",(function(){t!=a&&(c.tint=8553074)})).on("pointerout",(function(){t!=a&&(c.tint=16777215)})).on("pointerdown",(function(e){a.data=e.data,a.alpha=.5,a.dragging=!0})).on("pointerup",(function(){a.alpha=1,a.dragging=!1,a.data=null})).on("pointerupoutside",(function(){a.alpha=1,a.dragging=!1,a.data=null})).on("pointermove",(function(){if(a.dragging){var e=a.data.getLocalPosition(a.parent);a.x=e.x,a.y=e.y}})).on("pointertap",(function(e){o&&(o.tint=16777215),t=e.target.parent,(o=e.target).tint=16711680}));var u=new e.Text(c.index,{font:"2rem",fill:0,align:"center",cacheAsBitmap:!0});u.type="text",u.anchor.set(.5),a.addChild(u),r.stage.addChild(a)})),r.view.onmousewheel=function(e){d.set(e.layerX,e.layerY);var t=r.renderer.plugins.interaction.hitTest(d,r.stage);t&&t.emit("scroll",e)};var p=new e.Text("Save",{font:"4rem",fill:0,align:"center",cacheAsBitmap:!0});p.interactive=!0,p.buttonMode=!0,p.type="button",p.anchor.set(.5),p.x=40,p.y=20,p.on("pointertap",(function(){a()})),r.stage.addChild(p);var m=new e.Text("Remove",{font:"4rem",fill:0,align:"center",cacheAsBitmap:!0});m.interactive=!0,m.buttonMode=!0,m.type="button",m.anchor.set(.5),m.x=40,m.y=50,m.on("pointertap",(function(){t&&(r.stage.removeChild(t),t=void 0)})),r.stage.addChild(m),r.view.onclick=function(n){var a=JSON.parse(localStorage.getItem("currentMode"));if(d.set(n.layerX,n.layerY),!r.renderer.plugins.interaction.hitTest(d,r.stage)&&(a&&"cursor"===a.mode&&(o&&(o.tint=16777215),t=null,o=null),a&&"create"===a.mode)){var c=new e.Container;c.type="container",c.interactive=!0,c.buttonMode=!0,c.x=n.layerX,c.y=n.layerY;var u=e.Texture.from(a.image),l=new e.Sprite(u);l.type="table",l.id=a.id,l.uniqueId=Date.now(),l.anchor.set(.5),l.scale.set(.7),l.buttonMode=!0,l.interactive=!0,l.on("scroll",(function(e){r.rightMouse&&(e.deltaY>0?(l.rotation+=.261799,l.rotation>6.28&&(l.rotation=0)):(l.rotation-=.261799,l.rotation<-6.28&&(l.rotation=0)))})),l.index=r.stage.children.length-2,c.addChild(l),c.on("pointerover",(function(){t!=c&&(l.tint=8553074)})).on("pointerout",(function(){t!=c&&(l.tint=16777215)})).on("pointerdown",(function(e){c.data=e.data,c.alpha=.5,c.dragging=!0})).on("pointerup",(function(){c.alpha=1,c.dragging=!1,c.data=null})).on("pointerupoutside",(function(){c.alpha=1,c.dragging=!1,c.data=null})).on("pointermove",(function(){if(c.dragging){var e=c.data.getLocalPosition(c.parent);c.x=e.x,c.y=e.y}})).on("pointertap",(function(e){o&&(o.tint=16777215),t=e.target.parent,(o=e.target).tint=16711680}));var s=new e.Text(l.index,{font:"2rem",fill:0,align:"center",cacheAsBitmap:!0});s.type="text",s.anchor.set(.5),c.addChild(s),r.stage.addChild(c),localStorage.getItem("state")||g.a.render(i,document.getElementById("canvasWrapper"))}}}(),localStorage.setItem("state","loaded")),r.a.createElement(r.a.Fragment,null)},h=(n("Zs65"),function(){var e=Object(a.useState)(0),t=e[0],n=e[1];return Object(a.useEffect)((function(){(function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.database().ref("CanvasPreset").once("value").then((function(e){return e.val()}));case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,t?r.a.createElement(d,{key:0,id:0,image:t.cursorImage,mode:"cursor"}):"help",t?t.tables.map((function(e,t){return r.a.createElement(d,{key:t+1,id:e.id,image:e.image,mode:"create"})})):"Loading Data"),r.a.createElement("div",{id:"canvasWrapper"},document.getElementById("canvasWrapper")?r.a.createElement(m,{bgImage:t.bgImage,tableImages:t.tables,cursorImage:t.cursorImage}):"false"))});t.default=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,null,r.a.createElement(h,null)))}}}]);
//# sourceMappingURL=component---src-pages-admin-panel-jsx-39d786130a37686e636e.js.map