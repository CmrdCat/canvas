{"version":3,"sources":["webpack:///./src/components/canvas/AdminTableRender.jsx","webpack:///./src/components/canvas/AdminPanelTableRender.jsx","webpack:///./src/pages/adminPanel.jsx"],"names":["AdminTableRender","currentContainer","currentTable","bgImage","useState","answer","setData","loadedTables","loadTables","useEffect","fetchData","a","storage","firebase","storageRef","ref","child","getDownloadURL","then","result","load","database","once","snapshot","val","saveStage","tables","items","app","stage","children","filter","el","type","arr","map","underEl","console","log","obj","index","x","y","scaleX","scale","scaleY","rotation","transform","texture","_texture","textureCacheIds","uniqueId","id","push","localStorage","setItem","JSON","stringify","set","getItem","removeItem","document","getElementById","checked","PIXI","width","height","backgroundColor","canvas","backgroundImage","from","background","addChild","screen","innerHTML","appendChild","view","mousePosition","addEventListener","ev","preventDefault","rightMouse","onmousedown","which","onmouseup","container","interactive","buttonMode","table","anchor","info","on","e","deltaY","tint","event","data","alpha","dragging","newPosition","getLocalPosition","parent","target","text","font","fill","align","cacheAsBitmap","onmousewheel","layerX","layerY","found","renderer","plugins","interaction","hitTest","emit","saveButton","removeButton","removeChild","undefined","onclick","currentMode","parse","mode","image","Date","now","length","ReactDOM","render","createCanvas","AdminPanelTableRender","fbData","setfbData","useRef","ButtonItem","key","cursorImage","ind","tableImages"],"mappings":"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","file":"component---src-pages-admin-panel-jsx-daab7fe0c4a4d03a7367.js","sourcesContent":["/* eslint-disable */\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom'\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\nimport 'firebase/storage';\r\nimport * as PIXI from 'pixi.js';\r\n\r\n\r\n\r\nconst AdminTableRender = ({ \r\n    bgImage\r\n  }) => {\r\n\r\n  const [answer, setData] = useState(0);\r\n  const [loadedTables, loadTables] = useState(0);\r\n  let currentContainer;\r\n  let currentTable;\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const storage = firebase.storage();\r\n      const storageRef = storage.ref();\r\n      const imgURL = storageRef.child(`${bgImage}`);\r\n      // Get the download URL\r\n      imgURL.getDownloadURL().then((result) => {\r\n        setData(result);\r\n      });\r\n    };\r\n    const load = async () => {\r\n      const result = await firebase.database().ref('saved-tables').once('value').then((snapshot) => snapshot.val());\r\n      loadTables(result);\r\n    };\r\n    fetchData();\r\n    load();\r\n  }, []);\r\n\r\n  function createCanvas() {\r\n    if (localStorage.getItem('currentMode')) {\r\n      localStorage.removeItem('currentMode');\r\n    }\r\n    document.getElementById('0').checked = 'true'\r\n    function removeChild() {\r\n      if (currentContainer) {\r\n        app.stage.removeChild(currentContainer)\r\n        currentContainer = undefined\r\n      }\r\n      \r\n    }\r\n    function writeNewAdditions(tables) {\r\n      firebase.database().ref('saved-tables').set(tables);\r\n    }\r\n\r\n    function saveStage() {\r\n      const items = app.stage.children.filter((el) => el.type === 'container');\r\n\r\n      const arr = [];\r\n\r\n      items.map(el => {\r\n        el.children.map(underEl => {\r\n          if (underEl.type === 'table') {\r\n            console.log(underEl)\r\n            const obj = {}\r\n            obj.index = underEl.index;\r\n            obj.x = el.x;\r\n            obj.y = el.y;\r\n            obj.scaleX = underEl.scale.x;\r\n            obj.scaleY = underEl.scale.y;\r\n            obj.rotation = underEl.transform.rotation;\r\n            obj.texture = underEl._texture.textureCacheIds[0];\r\n            obj.uniqueId = underEl.uniqueId;\r\n            obj.id = underEl.id;\r\n            arr.push(obj)\r\n          }\r\n        })\r\n      })\r\n\r\n      localStorage.setItem('tables', JSON.stringify(arr));\r\n      localStorage.setItem('bgImage', answer);\r\n      writeNewAdditions(arr)\r\n    }\r\n    const app = new PIXI.Application({\r\n      width: 1000,\r\n      height: 620,\r\n      backgroundColor: 0x5BBA6F,\r\n    });\r\n\r\n    const canvas = document.getElementById('canvasWrapper')\r\n\r\n    const backgroundImage = PIXI.Texture.from(answer);\r\n    const background = new PIXI.Sprite(backgroundImage);\r\n    app.stage.addChild(background);\r\n    background.width = app.screen.width;\r\n    background.height = app.screen.height;\r\n\r\n    canvas.innerHTML = ''\r\n    canvas.appendChild(app.view)\r\n\r\n    const mousePosition = new PIXI.Point();\r\n\r\n    app.view.addEventListener('contextmenu', (ev) => {\r\n      ev.preventDefault();\r\n    }, false);\r\n\r\n    app.rightMouse = false;\r\n    app.view.onmousedown = (ev) => {\r\n      if (ev.which === 3) {\r\n        app.rightMouse = true;\r\n      }\r\n    };\r\n    app.view.onmouseup = (ev) => {\r\n      if (ev.which === 3) {\r\n        app.rightMouse = false;\r\n      }\r\n    };\r\n\r\n    if (loadedTables !== null) {\r\n      loadedTables.map(el => {\r\n        const container = new PIXI.Container();\r\n        container.type = 'container'\r\n        container.interactive = true;\r\n        container.buttonMode = true;\r\n\r\n        container.x = el.x;\r\n        container.y = el.y;\r\n\r\n        const texture = PIXI.Texture.from(el.texture)\r\n        const table = new PIXI.Sprite(texture);\r\n        table.type = 'table'\r\n\r\n        table.anchor.set(0.5);\r\n        table.scale.x = el.scaleX;\r\n        table.scale.y = el.scaleY;\r\n        table.rotation = el.rotation;\r\n        table.index = el.index;\r\n        table.info = el.info;\r\n        table.id = el.id\r\n        table.uniqueId = el.uniqueId;\r\n\r\n        table.buttonMode = true;\r\n        table.interactive = true;\r\n\r\n        table\r\n          .on('scroll', (e) => {\r\n            if (app.rightMouse) {\r\n              if (e.deltaY > 0) {\r\n                table.rotation += 0.261799;\r\n                if (table.rotation > 6.28) {\r\n                  table.rotation = 0;\r\n                }\r\n              } else {\r\n                table.rotation -= 0.261799;\r\n                if (table.rotation < -6.28) {\r\n                  table.rotation = 0;\r\n                }\r\n              }\r\n            }\r\n          });\r\n        container.addChild(table)\r\n\r\n        container\r\n          .on('pointerover', () => {\r\n            if (currentContainer != container) {\r\n              table.tint = 0x828272;\r\n            }\r\n          })\r\n          .on('pointerout', () => {\r\n            if (currentContainer != container) {\r\n              table.tint = 0xFFFFFF;\r\n            }\r\n          })\r\n          .on('pointerdown', (event) => {\r\n            container.data = event.data;\r\n            container.alpha = 0.5;\r\n            container.dragging = true;\r\n          })\r\n          .on('pointerup', () => {\r\n            container.alpha = 1;\r\n            container.dragging = false;\r\n            container.data = null;\r\n          })\r\n          .on('pointerupoutside', () => {\r\n            container.alpha = 1;\r\n            container.dragging = false;\r\n            container.data = null;\r\n          })\r\n          .on('pointermove', () => {\r\n            if (container.dragging) {\r\n              const newPosition = container.data.getLocalPosition(container.parent);\r\n              container.x = newPosition.x;\r\n              container.y = newPosition.y;\r\n            }\r\n          })\r\n          .on('pointertap', (ev) => {\r\n            if (currentTable) {\r\n              currentTable.tint = 0xFFFFFF;\r\n            }\r\n            currentContainer = ev.target.parent;\r\n            currentTable = ev.target;\r\n            currentTable.tint = 0xFF0000;\r\n          });\r\n\r\n        const text = new PIXI.Text(table.index,\r\n          {\r\n            font: '2rem',\r\n            fill: 0x000000,\r\n            align: 'center',\r\n            cacheAsBitmap: true,\r\n          });\r\n        text.type = 'text'\r\n        text.anchor.set(0.5);\r\n        container.addChild(text);\r\n\r\n        app.stage.addChild(container)\r\n      })\r\n    }\r\n\r\n    app.view.onmousewheel = (ev) => {\r\n      mousePosition.set(ev.layerX, ev.layerY);\r\n      const found = app.renderer.plugins.interaction.hitTest(\r\n        mousePosition,\r\n        app.stage,\r\n      );\r\n      if (found) {\r\n        found.emit('scroll', ev);\r\n      }\r\n    };\r\n\r\n    const saveButton = new PIXI.Text('Save',\r\n      {\r\n        font: '4rem',\r\n        fill: 0x000000,\r\n        align: 'center',\r\n        cacheAsBitmap: true,\r\n      });\r\n    saveButton.interactive = true;\r\n    saveButton.buttonMode = true;\r\n    saveButton.type = 'button';\r\n    saveButton.anchor.set(0.5);\r\n    saveButton.x = 40\r\n    saveButton.y = 20\r\n    saveButton\r\n      .on('pointertap', () => {\r\n        saveStage();\r\n      });\r\n    app.stage.addChild(saveButton);\r\n    const removeButton = new PIXI.Text('Remove',\r\n      {\r\n        font: '4rem',\r\n        fill: 0x000000,\r\n        align: 'center',\r\n        cacheAsBitmap: true,\r\n      });\r\n    removeButton.interactive = true;\r\n    removeButton.buttonMode = true;\r\n    removeButton.type = 'button';\r\n    removeButton.anchor.set(0.5);\r\n    removeButton.x = 40\r\n    removeButton.y = 50\r\n    removeButton\r\n      .on('pointertap', () => {\r\n        removeChild();\r\n      });\r\n    app.stage.addChild(removeButton);\r\n\r\n    app.view.onclick = (ev) => {\r\n      const currentMode = JSON.parse(localStorage.getItem('currentMode'))\r\n        mousePosition.set(ev.layerX, ev.layerY);\r\n        const found = app.renderer.plugins.interaction.hitTest(\r\n          mousePosition,\r\n          app.stage,\r\n        );\r\n        if (!found) {\r\n          if (currentMode && currentMode.mode === 'cursor') {\r\n            if (currentTable) {\r\n              currentTable.tint = 0xFFFFFF;\r\n            }\r\n            currentContainer = null;\r\n            currentTable = null;\r\n          }\r\n          if (currentMode && currentMode.mode === 'create') {\r\n          const container = new PIXI.Container();\r\n          container.type = 'container';\r\n          container.interactive = true;\r\n          container.buttonMode = true;\r\n\r\n          container.x = ev.layerX;\r\n          container.y = ev.layerY;\r\n\r\n          const texture = PIXI.Texture.from(currentMode.image)\r\n          const table = new PIXI.Sprite(texture);\r\n          table.type = 'table';\r\n          table.id = currentMode.id\r\n          table.uniqueId = Date.now()\r\n\r\n          table.anchor.set(0.5);\r\n          table.scale.set(0.7);\r\n\r\n          table.buttonMode = true;\r\n          table.interactive = true;\r\n\r\n          table\r\n            .on('scroll', (e) => {\r\n              if (app.rightMouse) {\r\n                if (e.deltaY > 0) {\r\n                  table.rotation += 0.261799;\r\n                  if (table.rotation > 6.28) {\r\n                    table.rotation = 0;\r\n                  }\r\n                } else {\r\n                  table.rotation -= 0.261799;\r\n                  if (table.rotation < -6.28) {\r\n                    table.rotation = 0;\r\n                  }\r\n                }\r\n              } \r\n            });\r\n\r\n          table.index = app.stage.children.length - 2;\r\n          container.addChild(table);\r\n\r\n          container\r\n            .on('pointerover', () => {\r\n              if (currentContainer != container) {\r\n                table.tint = 0x828272;\r\n              }\r\n            })\r\n            .on('pointerout', () => {\r\n              if (currentContainer != container) {\r\n                table.tint = 0xFFFFFF;\r\n              }\r\n            })\r\n            .on('pointerdown', (event) => {\r\n              container.data = event.data;\r\n              container.alpha = 0.5;\r\n              container.dragging = true;\r\n            })\r\n            .on('pointerup', () => {\r\n              container.alpha = 1;\r\n              container.dragging = false;\r\n              container.data = null;\r\n            })\r\n            .on('pointerupoutside', () => {\r\n              container.alpha = 1;\r\n              container.dragging = false;\r\n              container.data = null;\r\n            })\r\n            .on('pointermove', () => {\r\n              if (container.dragging) {\r\n                const newPosition = container.data.getLocalPosition(container.parent);\r\n                container.x = newPosition.x;\r\n                container.y = newPosition.y;\r\n              }\r\n            })\r\n            .on('pointertap', (ev) => {\r\n              if (currentTable) {\r\n                currentTable.tint = 0xFFFFFF;\r\n              }\r\n              currentContainer = ev.target.parent;\r\n              currentTable = ev.target;\r\n              currentTable.tint = 0xFF0000;\r\n            });\r\n\r\n          \r\n\r\n          const text = new PIXI.Text(table.index,\r\n            {\r\n              font: '2rem',\r\n              fill: 0x000000,\r\n              align: 'center',\r\n              cacheAsBitmap: true,\r\n            });\r\n          text.type = 'text';\r\n          text.anchor.set(0.5);\r\n          container.addChild(text);\r\n\r\n          app.stage.addChild(container);\r\n\r\n          if (!localStorage.getItem('state')){\r\n            ReactDOM.render(canvas, document.getElementById('canvasWrapper'))\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  if (answer !== 0 && loadedTables !== 0) {\r\n      createCanvas()\r\n      localStorage.setItem('state','loaded')\r\n    } \r\n\r\n  return <>\r\n  </>;\r\n}\r\n\r\nexport default AdminTableRender","/* eslint-disable */\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as PIXI from 'pixi.js';\nimport firebase from 'firebase/app';\nimport ButtonItem from './ButtonItem';\nimport AdminTableRender from './AdminTableRender';\nimport 'firebase/database';\n\nconst AdminPanelTableRender = () => {\n\n  const [fbData, setfbData] = useState(0);\n  const ref = useRef(null)\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await firebase.database().ref('CanvasPreset').once('value').then((snapshot) => snapshot.val());\n      setfbData(result);\n    };\n    fetchData();\n  }, []);\n\n  return (\n    <>\n      <div>\n        {fbData ? (<ButtonItem key={0} id={0} image={fbData.cursorImage}  mode={'cursor'}/>\n        ) : 'help'}\n        {fbData ? fbData.tables.map((el, ind) => (\n          <ButtonItem key={ind + 1} id={el.id} image={el.image} mode={'create'}/>\n        )) : 'Loading Data'}\n      </div>\n      <div id=\"canvasWrapper\">\n        {document.getElementById('canvasWrapper') ? (<AdminTableRender bgImage={fbData.bgImage} tableImages={fbData.tables} cursorImage={fbData.cursorImage}/>) : 'false'}\n      </div>\n    </>\n  );\n};\n\nexport default AdminPanelTableRender;\n","import React from 'react';\nimport Layout from '../components/layout';\nimport '../styles/canvas.scss';\nimport AdminPanelTableRender from '../components/canvas/AdminPanelTableRender';\n\nexport default () => (\n  <>\n    <Layout>\n      <AdminPanelTableRender />\n    </Layout>\n  </>\n);\n"],"sourceRoot":""}